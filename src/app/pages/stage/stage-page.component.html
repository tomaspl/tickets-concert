<div class="relative min-h-screen">
  <!-- Temporizador de cuenta regresiva -->
  <div
    class="p-4 max-w-sm w-full mx-auto flex justify-center"
    *ngIf="countdownActive"
  >
    <span class="text-white bg-gray-700 p-2 rounded">
      Tiempo restante para confirmar la reserva:
      <p class="bg-transparent font-bold">{{ formattedTime }}</p>
    </span>
  </div>
  <app-map />

  <div>
    <div [appTailwindClass]="'footer-fixed'">
      <span class="text-white bg-transparent"> </span>
      <div class="bg-transparent">
        @if (reservedSeats === 6) {
          <button
            class="bg-gray-500 text-white font-bold py-2 px-4 rounded mr-2 cursor-not-allowed"
            disabled
          >
            Reservar
          </button>
        } @else {
          <button
            (click)="reserveSeats()"
            [ngClass]="{ disabled: reservedSeats === 0 }"
            class="bg-cumbres-red hover:bg-red-600 text-white font-bold py-2 px-4 rounded"
          >
            Reservar
          </button>
        }
      </div>
    </div>

    <div
      [appTailwindClass]="'fixed-bottom-bar'"
      [ngClass]="{
        'fixed bottom-16 left-0 right-0 bg-gray-700 text-white p-4 fixed-footer-container': true,
        'expandable-content': true,
        show: showDetails,
      }"
    >
      <ul class="bg-transparent">
        @for (reservation of details$ | async; track reservation) {
          @if (reservation.row) {
            <li class="bg-transparent">
              {{ reservation.sectionName.split('-')[1] }} - Fila:
              {{ reservation.row }} - Asiento: {{ reservation.seat }}
            </li>
          } @else {
            <li class="bg-transparent">
              {{ reservation.sectionName.split('-')[1] }} - Palco:
              {{ reservation.seat }}
            </li>
          }
        }
      </ul>
    </div>
  </div>
  <app-toaster></app-toaster>
</div>
